"use strict";angular.module("sbGridApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("sbGridApp").controller("MainCtrl",["$scope",function(a){var b=0;a.participants=[],a.partTable={error:"",empty:0,headers:{top:[],side:[]},participants:[]},a.resetNewUser=function(){a.newUser={name:"",squares:""}};var c=function(a,b){return Math.floor(Math.random()*(a+b+1)+a)};a.partTable.add=function(b){var d=this.getSpacesLeft();b.squares>d&&(b.squares=d);for(var e=0;e<b.squares;e++){var f=c(0,9),g=c(0,9);if(this.participants[g][f]){if(this.empty<=0)break;e--}else this.participants[g][f]=b,this.empty--}a.participants.push(b)},a.partTable.getSpacesLeft=function(){var a=this.participants;this.empty=0;for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.length;d++)(void 0===c[d]||""===c[d])&&this.empty++;return this.empty},a.addUser=function(){var c={id:b,name:a.newUser.name,squares:parseInt(a.newUser.squares)};b++,a.resetNewUser(),a.partTable.add(c),a.adding=!a.adding},a.removeUser=function(b){var c=a.participants.indexOf(a.participants.filter(function(a){return a.id===b})[0]);c>-1&&a.participants.splice(c);for(var d=a.partTable.participants,e=0;e<d.length;e++)for(var f=0;f<d[e].length;f++)d[e][f]&&d[e][f].id===b&&(a.partTable.participants[e][f]=void 0)},a.range=function(a){for(var b=[],c=0;a>c;c++)b[c]=c;return b};for(var d=0;10>d;d++)a.partTable.headers.top[d]=d,a.partTable.headers.side[d]=d,a.partTable.participants[d]=[],a.partTable.participants[d].length=10;a.resetNewUser()}]);